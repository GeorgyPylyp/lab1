package com.example.myapplication2;


import android.os.Bundle;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

import java.util.ArrayList;
import java.util.Random;

public class MainActivity extends AppCompatActivity {

    TextView tvQuestion, tvScore;
    Button btnTrue, btnFalse;

    String[] questions = {
            "–ú–∏–∫–æ–ª–∞ –õ–∏—Å–µ–Ω–∫–æ –≤–≤–∞–∂–∞—î—Ç—å—Å—è –∑–∞—Å–Ω–æ–≤–Ω–∏–∫–æ–º —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –∫–ª–∞—Å–∏—á–Ω–æ—ó –º—É–∑–∏–∫–∏.",
            "–ö–æ–±–∑–∞—Ä—Å—Ç–≤–æ –≤–∏–Ω–∏–∫–ª–æ —É XX —Å—Ç–æ–ª—ñ—Ç—Ç—ñ.",
            "–û–ø–µ—Ä–∞ ¬´–ó–∞–ø–æ—Ä–æ–∂–µ—Ü—å –∑–∞ –î—É–Ω–∞—î–º¬ª –Ω–∞–ø–∏—Å–∞–Ω–∞ –°–µ–º–µ–Ω–æ–º –ì—É–ª–∞–∫–æ–º-–ê—Ä—Ç–µ–º–æ–≤—Å—å–∫–∏–º.",
            "–õ–µ–æ–Ω—Ç–æ–≤–∏—á —î –∞–≤—Ç–æ—Ä–æ–º ¬´–©–µ–¥—Ä–∏–∫–∞¬ª.",
            "–ë–∞–Ω–¥—É—Ä–∞ ‚Äî –¥—É—Ö–æ–≤–∏–π –º—É–∑–∏—á–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç."
    };

    boolean[] answers = {
            true, false, true, true, false
    };

    ArrayList<Integer> usedQuestions = new ArrayList<>();
    Random random = new Random();

    int score = 0;
    int currentIndex;

    boolean withoutRepeats = true; // üîÅ –∑–º—ñ–Ω—é–π –Ω–∞ false ‚Äî –∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è–º–∏

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tvQuestion = findViewById(R.id.tvQuestion);
        tvScore = findViewById(R.id.tvScore);
        btnTrue = findViewById(R.id.btnTrue);
        btnFalse = findViewById(R.id.btnFalse);

        showQuestion();

        btnTrue.setOnClickListener(v -> checkAnswer(true));
        btnFalse.setOnClickListener(v -> checkAnswer(false));
    }

    void showQuestion() {
        if (withoutRepeats && usedQuestions.size() == questions.length) {
            Toast.makeText(this,
                    "–ì—Ä—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –†–µ–∑—É–ª—å—Ç–∞—Ç: " + score,
                    Toast.LENGTH_LONG).show();
            btnTrue.setEnabled(false);
            btnFalse.setEnabled(false);
            return;
        }

        do {
            currentIndex = random.nextInt(questions.length);
        } while (withoutRepeats && usedQuestions.contains(currentIndex));

        usedQuestions.add(currentIndex);
        tvQuestion.setText(questions[currentIndex]);
    }

    void checkAnswer(boolean userAnswer) {
        if (userAnswer == answers[currentIndex]) {
            score++;
        }

        tvScore.setText("Score: " + score);
        showQuestion();
    }
}
